refactor timer fifo and printf function, also slightly modify the counter to compare performance