calculating available memory and manage memory
